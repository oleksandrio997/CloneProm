@model CloneProm.Models.Product

@{
    ViewData["Title"] = Model.Name;
}

<div class="container mt-5">
    <div class="row">

        <!-- Левая колонка -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <img src="@Model.ImagePath"
                     class="img-fluid rounded"
                     style="object-fit: cover; max-height: 500px;" />
            </div>
        </div>

        <!-- Правая колонка -->
        <div class="col-md-6">

            <h2 class="fw-bold">@Model.Name</h2>

            @if (Model.Quantity > 0)
            {
                <span class="badge bg-success mb-2">В наличии</span>
            }
            else
            {
                <span class="badge bg-danger mb-2">Нет в наличии</span>
            }

            <!-- Цена -->
            <div class="mt-3">
                @if (Model.Discount > 0)
                {
                    <h4>
                        <span class="text-muted text-decoration-line-through">
                            @Model.Price.ToString("C")
                        </span>
                        <span class="text-danger fw-bold ms-2">
                            @(Model.Price - (Model.Price * Model.Discount / 100)).ToString("C")
                        </span>
                    </h4>
                }
                else
                {
                    <h4 class="fw-bold text-danger">
                        @Model.Price.ToString("C")
                    </h4>
                }
            </div>

            <!-- Описание -->
            <div class="mt-4">
                <h5>Описание</h5>
                <p class="text-muted">@Model.Description</p>
            </div>

            <div class="mt-3">
                <p><strong>Категория:</strong> @Model.Category?.Name</p>
                <p><strong>Продавец:</strong> @Model.Seller?.ShopName</p>
            </div>

            <!-- Кнопка Купить (серая + form) -->
            <div class="mt-4">

                @if (Model.Quantity > 0)
                {
                    <form asp-controller="Cart"
                          asp-action="AddToCart"
                          method="post"
                          class="d-inline-block ajax-cart-form">

                        @Html.AntiForgeryToken()
                        <input type="hidden" name="productId" value="@Model.Id" />

                        <button type="submit"
                                class="btn btn-secondary btn-lg">
                            Купить
                        </button>
                    </form>
                }
                else
                {
                    <button class="btn btn-secondary btn-lg" disabled>
                        Нет в наличии
                    </button>
                }

            </div>

            <!-- Управление -->
            <div class="mt-4">
                <a asp-action="Edit"
                   asp-route-id="@Model.Id"
                   class="btn btn-warning">
                    Редактировать
                </a>

                <a asp-action="Index"
                   class="btn btn-outline-secondary">
                    Назад
                </a>
            </div>

        </div>
    </div>
</div>